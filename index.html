<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoFinds</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="webpage">
        <header class="header">
            <div class="header--logo">
                <img src="images/logo/logo.png" alt="logo">
            </div>

            <div class="header--reg-log">
                <button>Sign in</button>

                <button>Log in</button>

                <button>Forgot account?</button>
            </div>
        </header>

        <section class="content">

            <aside class="aside">
                <div class="aside--search-box">
                    <div class="search-box--header">
                        <h1>Marketplace</h1>
                    </div>
                    <div class="search-box--search-bar">
                        <input type="text" id="search-bar" placeholder="Search Marketplace">
                    </div>
                    <div class="search-box--acnt">
                        <a href="">Your account</a>
                    </div>
                </div>

                <div class="aside--location">
                    <h2>Location:</h2>
                    <a href="">India</a>
                </div>

                <div class="aside--category-list">
                    <ul>
                        <li><a href="">Vehicles</a></li>
                        <li><a href="">Property for rent</a></li>
                        <li><a href="">Classifieds</a></li>
                        <li><a href="">Clothing</a></li>
                        <li><a href="">Electronics</a></li>
                        <li><a href="">Entertainment</a></li>
                        <li><a href="">Family</a></li>
                        <li><a href="">Free stuff</a></li>
                        <li><a href="">Garden and outdoor</a></li>
                        <li><a href="">Hobbies</a></li>
                        <li><a href="">Home goods</a></li>
                        <li><a href="">Home improvement supplies</a></li>
                        <li><a href="">Musical instruments</a></li>
                        <li><a href="">Office supplies</a></li>
                        <li><a href="">Pet supplies</a></li>
                        <li><a href="">Property for sale</a></li>
                        <li><a href="">Sporting goods</a></li>
                        <li><a href="">Toys and games</a></li>
                        <li><a href="more categories"></a></li>
                    </ul>
                </div>
            </aside>

            <main class="main">
                <div class="main--header">
                    <h1>Today's picks</h1>
                </div>

                <div class="grid" id="marketplace">
                </div>

                <h2>Marketplace Item</h2>
                <img src="https://via.placeholder.com/600" class="item-img" alt="Item">

                <!-- Fullscreen Overlay -->
                <div class="overlay" id="overlay">
                    <span class="close-btn" id="closeBtn">&times;</span>
                    <div class="overlay-content">
                        <!-- Left: Image -->
                        <div class="overlay-left">
                            <img src="" id="overlayImg" alt="Fullscreen Item">
                        </div>
                        <!-- Right: Item Details -->
                        <div class="overlay-right">
                            <h2 id="itemTitle">Sample Item Title</h2>
                            <h3 id="itemPrice">$120</h3>
                            <p><strong>Location:</strong> New York, USA</p>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Donec euismod, nisi vel consectetur blandit, risus magna commodo mi,
                                eget tincidunt sapien augue a justo.</p>
                        </div>
                    </div>
                </div>
            </main>
        </section>



        <script>
            const items = [
                { img: "images/dining_table.jpg", title: "Dining Table", location: "Delhi", price: 15000 },
                { img: "images/guitar.jpeg", title: "Yamaha Acoustic Guitar", location: "Mumbai", price: 8000 },
                { img: "images/thinkpad.webp", title: "Lenovo ThinkPad X1", location: "Bangalore", price: 90000 },
                { img: "images/books.jpeg", title: "Used Bundle of Books", location: "Pune", price: 1200 },
                { img: "images/keyboard.webp", title: "Redragon K552 Keyboard", location: "Hyderabad", price: 2200 },
                { img: "images/iphone_xr.jpg", title: "iPhone XR", location: "Chennai", price: 28000 },
                { img: "images/honda_crf.jpg", title: "20004 Honda CRF", location: "Kolkata", price: 85000 },
                { img: "images/sneakers.webp", title: "Nike Sneakers", location: "Ahmedabad", price: 4500 },
                { img: "images/4wheeler.jpeg", title: "Razor 4 Wheelers", location: "Lucknow", price: 7000 },
                { img: "images/iphone.jpg", title: "iPhone", location: "Jaipur", price: 30000 },
                { img: "images/macbook.jpg", title: "MacBook Pro 2017", location: "Delhi", price: 55000 },
                { img: "images/refrigerator.jpg", title: "Whirlpool Refrigerator", location: "Mumbai", price: 20000 },
                { img: "images/fortuner.jpg", title: "Toyota Fortuner 4x4", location: "Chandigarh", price: 3200000 },
                { img: "images/activa.jpg", title: "Honda Activa", location: "Bhopal", price: 65000 },
                { img: "images/ps4_games.jpg", title: "PS4 Games Bundle", location: "Surat", price: 3500 },
                { img: "images/sewing_machine.jpg", title: "Sewing Machine", location: "Indore", price: 8000 },
                { img: "images/nerf.jpg", title: "Nerf Guns & Toys", location: "Patna", price: 4000 },
                { img: "images/hotwheels.jpg", title: "Hotwheels CSS Collection", location: "Nagpur", price: 2500 },
                { img: "images/drumkit.jpg", title: "Havana Acoustic Drum Kit", location: "Goa", price: 20000 },
                { img: "images/organ.jpg", title: "Yamaha PSR Organ", location: "Coimbatore", price: 30000 },
                { img: "images/study_table.jpg", title: "Study Table", location: "Noida", price: 7000 }
            ];

            // Shuffle function
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            function renderItems() {
                const container = document.getElementById("marketplace");
                container.innerHTML = "";

                let products = [...items];
                shuffleArray(products);

                products.forEach(item => {
                    // Price variation ±20%
                    let variation = (Math.random() * 0.4 - 0.2) * item.price;
                    let adjustedPrice = Math.max(0, Math.round(item.price + variation));

                    // Format as INR
                    let priceText = adjustedPrice === 0
                        ? "FREE"
                        : "₹" + adjustedPrice.toLocaleString("en-IN");

                    let card = document.createElement("div");
                    card.className = "card";
                    card.innerHTML = `
          <img src="${item.img}" alt="${item.title}">
          <div class="info">
            <div class="price">${priceText}</div>
            <div class="title">${item.title}</div>
            <div class="location">${item.location}</div>
          </div>
        `;
                    container.appendChild(card);
                });
            }

            // Run on first load
            renderItems();;

            // adding new properties from here onwards

            const itemImg = document.querySelector(".card");
            const overlay = document.getElementById("overlay");
            const overlayImg = document.getElementById("overlayImg");
            const closeBtn = document.getElementById("closeBtn");

            // Show overlay when clicking item
            itemImg.addEventListener("click", () => {  
                overlay.style.display = "block";
                overlayImg.src = itemImg.src;
            });

            // Close overlay
            closeBtn.addEventListener("click", () => {
                overlay.style.display = "none";
            });

            // Close when clicking outside (only black bg, not details)
            overlay.addEventListener("click", (e) => {
                if (e.target === overlay) {
                    overlay.style.display = "none";
                }
            });

        </script>
    </div>

</body>

</html>